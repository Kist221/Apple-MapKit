<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js"></script>

    <style>
        #map {
            height: 600px;
            width: 80%;
            margin: 0 auto;
        }

        a:link,
        a:visited {
            color: red;
            outline: none;
            text-decoration: none;
        }

        .landmark {
            width: 250px;
            padding: 7px 0 0 0;
            background: rgba(247, 247, 247, 0.75);
            border-radius: 5px;
            box-shadow: 10px 10px 50px rgba(0, 0, 0, 0.29);
            font-family: Helvetica, Arial, sans-serif;
            -webkit-transform-origin: 0 10px;
            transform-origin: 0 10px;
        }

        .landmark h1 {
            margin-top: 0;
            padding: 5px 15px;
            background: red;
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            font-weight: 300;
        }

        .landmark section {
            padding: 0 15px 5px;
            font-size: 14px;
        }

        .landmark section p {
            margin: 5px 0;
        }

        .landmark:after {
            content: "";
            position: absolute;
            top: 7px;
            left: -13px;
            width: 0;
            height: 0;
            margin-bottom: -13px;
            border-right: 13px solid red;
            border-top: 13px solid rgba(0, 0, 0, 0);
            border-bottom: 13px solid rgba(0, 0, 0, 0);
        }

        @-webkit-keyframes scale-and-fadein {
            0% {
                -webkit-transform: scale(0.2);
                opacity: 0;
            }

            100% {
                -webkit-transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes scale-and-fadein {
            0% {
                transform: scale(0.2);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>

</head>

<body>
    <div id="map"></div>

    <script>
        mapkit.init({
            authorizationCallback: function (done) {
                done(
                    'eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjhUMzg0OEI5TEQifQ.eyJpc3MiOiJMVFFXVDg4NzNZIiwiaWF0IjoxNTM1NjQ1NDA4LCJleHAiOjI1MjgzMjM4Mzd9.lZLq9Dt7pCCtdSKttLRYZqZLgPW2MtirmCvDxr6mUzJN_aYh_lHQrdmLKWLofRWdjk3UnT71l_fsxzqYMSu4PQ'
                );
            }
        });

        // schools data
        var schools = [{
                coordinate: new mapkit.Coordinate(32.1937708, -110.8575854),
                title: "Canyon Rose Academy",
                phone: "520.797.4884",
                url: "https://www.go2rose.com/"
            },
            {
                coordinate: new mapkit.Coordinate(32.25988731530194, -110.80017898366019),
                title: "Canyon Rose Academy East",
                phone: "520.797.4884",
                url: "https://www.go2rose.com/"
            },
            {
                coordinate: new mapkit.Coordinate(32.265644073486, -110.976570129395),
                title: "Desert Rose Academy",
                phone: "520.797.4884",
                url: "https://www.go2rose.com/"
            },
            {
                coordinate: new mapkit.Coordinate(32.324493408203, -111.043563842773),
                title: "Mountain Rose Academy",
                phone: "520.797.4884",
                url: "https://www.go2rose.com/"
            },
            {
                coordinate: new mapkit.Coordinate(32.161285400391, -111.002098083496),
                title: "Pima Rose Academy",
                phone: "520.797.4884",
                url: "https://www.go2rose.com/"
            }
        ];

        // Landmark annotation callout delegate
        var CALLOUT_OFFSET = new DOMPoint(-148, -78);
        var landmarkAnnotationCallout = {
            calloutElementForAnnotation: function (annotation) {
                return calloutForLandmarkAnnotation(annotation);
            },

            calloutAnchorOffsetForAnnotation: function (annotation, element) {
                return CALLOUT_OFFSET;
            },

            calloutAppearanceAnimationForAnnotation: function (annotation) {
                return "scale-and-fadein .4s 0 1 normal cubic-bezier(0.4, 0, 0, 1.5)";
            }
        };

        // schools annotations
        var annotations = schools.map(function (landmark) {
            var annotation = new mapkit.MarkerAnnotation(landmark.coordinate, {
                callout: landmarkAnnotationCallout,
                // color of markers
                color: "red"
            });
            annotation.landmark = landmark;
            return annotation;
        });

        var map = new mapkit.Map("map");

        map.showItems(annotations);

        let rose = new mapkit.Geocoder({
            getsUserLocation: true
        });;

        // lookup location and return place object
        rose.lookup("CS Design Studios", function (data, err) {
            console.log(data, err);
        });

        // Landmark annotation custom callout
        function calloutForLandmarkAnnotation(annotation) {
            var div = document.createElement("div");
            div.className = "landmark";

            var title = div.appendChild(document.createElement("h1"));
            title.textContent = annotation.landmark.title;

            var section = div.appendChild(document.createElement("section"));

            var phone = section.appendChild(document.createElement("p"));
            phone.className = "phone";
            phone.textContent = annotation.landmark.phone;

            var link = section.appendChild(document.createElement("p"));
            link.className = "homepage";
            var a = link.appendChild(document.createElement("a"));
            a.href = annotation.landmark.url;
            a.textContent = "Website";

            return div;
        }
    </script>
</body>

</html>